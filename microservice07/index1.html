<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<script>

let data = []
    let options = {

title: {
    text: 'Actual total load per country'
},

subtitle: {
    text: ''
},

yAxis: {
    title: {
        text: 'Actual total load values'
    }
},

xAxis: {
    categories: []
},

legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'middle'
},

plotOptions: {
    series: {
        label: {
            connectorAllowed: false
        },
        pointStart: 1
    }
},

series: [{
    name: 'Actual load',
    data: data
}],

responsive: {
    rules: [{
        condition: {
            maxWidth: 500
        },
        chartOptions: {
            legend: {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom'
            }
        }
    }]
}

}
    function plot(){
        Highcharts.chart('container', options);
    }
    function addElement(){
        data.push(Math.floor(Math.random()*1000))
        options.series[0].data = data;
        plot()
    }
    let userId =  1;
    function addFromWeb(){
        const url = 'https://jsonplaceholder.typicode.com/todos/'+ userId;
        //console.log("1");
        fetch(url).then(response => response.json()).then(json => {
             //console.log(json.ind);
             //alert("1");
             userId++;
             data.push(json['id']*2000);
             options.series[0].data = data;
             plot()
        }
        )
    }
    function addFromWeb1(){
        const url = 'http://localhost:4002/totalload/DE/2000-01-01%2000:00:00/2030-01-01%2000:00:00/';
        //console.log("1");
        //alert("1");
        fetch(url).then(response => response.json()).then(json => {
             //console.log(json.ind);
             //alert("1");
             console.log(json.list[0].TotalLoadValue)
             var x = (Object.keys(json.list).length)
             for (var i=0; i<x; i++){
             console.log(json.list[i].TotalLoadValue);
             data.push(json.list[i].TotalLoadValue);
             }
             options.series[0].data = data;
             plot()
             data = [];
        }
        )
    }
</script>
  

<button onclick="plot()">Plot</button>
<button onclick="addElement()">addElement</button>
<button onclick="addFromWeb1()">AddFromWeb</button>
<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
        Basic line chart showing trends in a dataset. This chart includes the
        <code>series-label</code> module, which adds a label to each line for
        enhanced readability.
    </p>
</figure>